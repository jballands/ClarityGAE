<div class="tab-pane fade" id="tab-data">
    <br>
    <div class="container" style="text-align: center;">
        <div class="btn-group" data-toggle="buttons" id="data-button-group">
            <label class="btn btn-primary btn-lg" id="data-button-client">
                <input type="radio" name="options"> Clients
            </label>
            <label class="btn btn-primary btn-lg" id="data-button-provider">
                <input type="radio" name="options"> Providers
            </label>
            <label class="btn btn-primary btn-lg" id="data-button-ticket">
                <input type="radio" name="options"> Tickets
            </label>
        </div>
    </div>
    <br>
    <div class="progress progress-striped active" style="display: block; margin-left: auto; margin-right: auto; width: 80%;">
        <div class="progress-bar"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 0%;" id="data-progress">
        </div>
    </div>
    <table class="table table-striped table-bordered" id="data-table">
    </table>
</div>

<script type="text/javascript">
    function preRequest(){
        $('#data-table tr').remove();
        $('#data-progress').css('width', '100%');
    }

    function parseData(data, status, xhr){
        if(data.length > 0){
            var first = data[0];
            var fields = Object.keys(first);
            fields.sort();
            var table = $('#data-table');
            var out = '<tr>';
            for (i in fields){
                out += '<td><strong>' + fields[i] + '</strong></td>';
            }
            out += '</tr>';
            table.append(out);

            for (i in data){
                var instance = data[i]
                var out = '<tr>';
                for (i in fields){
                    out += '<td>' + instance[fields[i]] + '</td>';
                }
                out += '</tr>';
                table.append(out);
            }
        }
        $('#data-progress').css('width', '0%');
    }

    $('#data-button-client').click(function() {
        preRequest();
        $.ajax({
            'url': '/api/client_get?token=' + session,
            'success': parseData,
            'dataType': 'json'
        });
    });

    $('#data-button-provider').click(function() {
        preRequest();
        $.ajax({
            'url': '/api/provider_get?token=' + session,
            'success': parseData,
            'dataType': 'json'
        });
    });

    $('#data-button-ticket').click(function() {
        preRequest();
        $.ajax({
            'url': '/api/ticket_get?token=' + session,
            'success': parseData,
            'dataType': 'json'
        });
    });
</script>